<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>华擎B365m-itx黑苹果EFI</title>
    <url>/2020/11/11/hua-qing-b365m-itx-hei-ping-guo-efi/</url>
    <content><![CDATA[<h1 id="电脑配置清单"><a href="#电脑配置清单" class="headerlink" title="电脑配置清单"></a>电脑配置清单</h1><ul>
<li>主板： 华擎b365m-itx/ac</li>
<li>CPU:    i5 9400</li>
<li>内存： 枭鲸16G 2666MHz * 2</li>
<li>硬盘：海康威视C2000 Pro 1024G + SN750 512G + 1024机械硬盘（备份系统）</li>
<li>网卡： BCM94360CS2（免驱）</li>
<li>显卡： 平时只打代码，不打游戏，就没买独显了</li>
</ul>
<h1 id="引导文件EFI"><a href="#引导文件EFI" class="headerlink" title="引导文件EFI"></a>引导文件EFI</h1><ul>
<li><p>系统：Catalina 10.15.7</p>
</li>
<li><p>OpenCore 0.6.3</p>
</li>
</ul>
<h1 id="使用情况"><a href="#使用情况" class="headerlink" title="使用情况"></a>使用情况</h1><ul>
<li>达到99%的完美度</li>
<li>节能五项都能使用</li>
<li>单系统MacOS</li>
</ul>
<h1 id="EFI文件"><a href="#EFI文件" class="headerlink" title="EFI文件"></a>EFI文件</h1><ul>
<li><p>2020-11-13 Big Sur.    <a href="https://github.com/KeXQ/-b365itx-i59400-efi/files/5534881/EFI-2020-11-13.zip">EFI</a></p>
<ul>
<li>更新到最新的系统</li>
<li>修改了开启SIP的选项 </li>
<li>修改了引导参数 boot-args：keepsyms=1 debug=0x100 cardtype=ecardonly,csr-active-config:67000000改为了00000000来开启SIP,csr-active-config的值解释如下和原来的Catalina不一样了</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">00000000 -完全启用SIP（0x0）。</span><br><span class="line">03000000 -禁用kext签名（0x1）和文件系统保护（0x2）。</span><br><span class="line">FF030000 -禁用macOS High Sierra（0x3ff）中的所有标志。</span><br><span class="line">FF070000 -当Apple引入了可执行策略的值时，禁用macOS Mojave和macOS Catalina（0x7ff）中的所有标志。</span><br><span class="line">FF0F0000 -禁用macOS Big Sur（0xfff）中的所有标志，该标志具有用于身份验证的root的另一个新标志。</span><br></pre></td></tr></tbody></table></figure>



</li>
</ul>
<ul>
<li><p>添加了4D1FDA02-38C7-4A6A-9CC6-4BCCA8B30102:rtc-blacklist</p>
<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201113124855389.png" alt="image-20201113124855389"></p>
<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201113125007837.png" alt="image-20201113125007837"></p>
<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201113133446806.png" alt="image-20201113133446806"></p>
</li>
</ul>
<ul>
<li>2020-11-01 Catalina 10.15.7 <a href="https://github.com/KeXQ/-b365itx-i59400-efi.git">EFI</a></li>
</ul>
<h1 id="谢鸣"><a href="#谢鸣" class="headerlink" title="谢鸣"></a>谢鸣</h1><ul>
<li>黑果小兵提供的<a href="https://blog.daliansky.net/macOS-Catalina-10.15.7-19H2-Release-version-with-Clover-5122-original-image-Double-EFI-Version-UEFI-and-MBR.html">镜像</a>以及<a href="https://blog.daliansky.net/OpenCore-BootLoader.html">精解OpenCore</a>的帮助</li>
<li>远景论坛大佬们的指导</li>
</ul>
<h1 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h1><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201110224153663.png" alt="image-20201110224153663"></p>
<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201110224319790.png" alt="image-20201110224319790"></p>
<ul>
<li>硬解没问题</li>
</ul>
<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201110230539942.png" alt="image-20201110230539942"></p>
]]></content>
      <categories>
        <category>黑苹果</category>
      </categories>
      <tags>
        <tag>OpenCore</tag>
      </tags>
  </entry>
  <entry>
    <title>三个数之和</title>
    <url>/2020/11/12/san-ge-shu-zhi-he/</url>
    <content><![CDATA[<h1 id="题目："><a href="#题目：" class="headerlink" title="题目："></a>题目：</h1><p>给你一个包含 n 个整数的数组 nums，判断 nums 中是否存在三个元素 a，b，c ，使得 a + b + c = 0 ？请你找出所有满足条件且不重复的三元组。</p>
<p>注意：答案中不可以包含重复的三元组。</p>
<p>示例：</p>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">给定数组 nums = [-1, 0, 1, 2, -1, -4]，</span><br><span class="line"></span><br><span class="line">满足要求的三元组集合为：</span><br><span class="line">[</span><br><span class="line">  [-1, 0, 1],</span><br><span class="line">  [-1, -1, 2]</span><br><span class="line">]</span><br></pre></td></tr></tbody></table></figure>



<h1 id="解法一：暴力解法"><a href="#解法一：暴力解法" class="headerlink" title="解法一：暴力解法"></a>解法一：暴力解法</h1><ul>
<li>先排序，后暴力遍历，时间复杂度为O(n^3)</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; threeSum(<span class="keyword">int</span>[] nums) {</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">3</span>) {</span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        }</span><br><span class="line">        <span class="comment">// 排序</span></span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i ++){</span><br><span class="line">            <span class="keyword">int</span> x = nums[i];</span><br><span class="line">            <span class="keyword">if</span>(x &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="comment">// 去重</span></span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i-<span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; len; j ++ ){</span><br><span class="line">                <span class="keyword">int</span> y = nums[j]; </span><br><span class="line">                <span class="keyword">if</span>(y+x&gt;<span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">// 去重</span></span><br><span class="line">                <span class="keyword">if</span> (j &gt; i + <span class="number">1</span> &amp;&amp; nums[j] == nums[j-<span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">for</span>(<span class="keyword">int</span> k = j + <span class="number">1</span>; k &lt; len; k ++){</span><br><span class="line">                    <span class="keyword">int</span> z = nums[k];</span><br><span class="line">                    <span class="keyword">if</span>(z + x + y &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                    <span class="comment">// 去重</span></span><br><span class="line">                    <span class="keyword">if</span> (k &gt; j + <span class="number">1</span> &amp;&amp; nums[k] == nums[k-<span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                    </span><br><span class="line">                    <span class="keyword">if</span>(nums[i] + nums[j] == -nums[k]){</span><br><span class="line">                        List&lt;Integer&gt; temp = <span class="keyword">new</span> ArrayList(<span class="number">3</span>);</span><br><span class="line">                        temp.add(nums[i]);</span><br><span class="line">                        temp.add(nums[j]);</span><br><span class="line">                        temp.add(nums[k]);</span><br><span class="line">                        list.add(temp);</span><br><span class="line">                    }</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>注： 在leetcode上超时</li>
</ul>
<h1 id="解法二：-暴力解法-hashmap"><a href="#解法二：-暴力解法-hashmap" class="headerlink" title="解法二： 暴力解法+hashmap"></a>解法二： 暴力解法+hashmap</h1><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>{</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; threeSum(<span class="keyword">int</span>[] nums) {</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> len = nums.length;</span><br><span class="line">        <span class="keyword">if</span>(len &lt; <span class="number">3</span>) {</span><br><span class="line">            <span class="keyword">return</span> list;</span><br><span class="line">        }</span><br><span class="line">        Arrays.sort(nums);</span><br><span class="line">        Map&lt;Integer,Integer&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="comment">// 将数组存放到map中</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) {</span><br><span class="line">            map.put(nums[i],i);</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i ++){</span><br><span class="line">            <span class="keyword">int</span> x = nums[i];</span><br><span class="line">            <span class="keyword">if</span> (x &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i-<span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="keyword">int</span> j = i + <span class="number">1</span>; j &lt; len; j ++ ){</span><br><span class="line">                <span class="keyword">int</span> y = nums[j];</span><br><span class="line">                <span class="comment">// x + y &gt; 0表示后面的和一定大于0</span></span><br><span class="line">                <span class="keyword">if</span> (x + y &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">                <span class="comment">// 去重</span></span><br><span class="line">                <span class="keyword">if</span> (j &gt; i + <span class="number">1</span> &amp;&amp; nums[j] == nums[j-<span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">                <span class="keyword">int</span> z = <span class="number">0</span> - x - y;</span><br><span class="line">                <span class="comment">// 判断z是否在map中且z的index &gt; j || i</span></span><br><span class="line">                <span class="keyword">if</span> (map.containsKey(z) &amp;&amp; map.get(z) &gt; j){</span><br><span class="line">                    List&lt;Integer&gt; temp = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">                    temp.add(x);</span><br><span class="line">                    temp.add(y);</span><br><span class="line">                    temp.add(z);</span><br><span class="line">                    list.add(temp);</span><br><span class="line">                }</span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> list;</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>



<h1 id="解法三：左右指针"><a href="#解法三：左右指针" class="headerlink" title="解法三：左右指针"></a>解法三：左右指针</h1><figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">List&lt;List&lt;Integer&gt;&gt; list = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"> <span class="keyword">int</span> len = nums.length;</span><br><span class="line"> <span class="keyword">if</span> (len &lt; <span class="number">3</span>) {</span><br><span class="line">     <span class="keyword">return</span> list;</span><br><span class="line"> }</span><br><span class="line"> Arrays.sort(nums);</span><br><span class="line"> <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++) {</span><br><span class="line">     <span class="comment">// 当第一个数大于0时，说明该集合的和大于0；</span></span><br><span class="line">     <span class="keyword">if</span> (nums[i] &gt; <span class="number">0</span>) <span class="keyword">break</span>;</span><br><span class="line">     <span class="comment">// 去重</span></span><br><span class="line">     <span class="keyword">if</span> (i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i - <span class="number">1</span>]) <span class="keyword">continue</span>;</span><br><span class="line">     <span class="keyword">int</span> l = i + <span class="number">1</span>;</span><br><span class="line">     <span class="keyword">int</span> r = nums.length - <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">     <span class="keyword">while</span> (l &lt; r){</span><br><span class="line">         <span class="keyword">int</span> num = nums[l] + nums[i] + nums[r];</span><br><span class="line">         <span class="comment">// 当三个数的和大于0时，l指针左移，且去重</span></span><br><span class="line">         <span class="keyword">if</span> (num &gt; <span class="number">0</span>){</span><br><span class="line">             <span class="keyword">while</span> (l &lt; r &amp;&amp; nums[r] == nums[--r]);</span><br><span class="line">         }</span><br><span class="line">         <span class="comment">// 当三个数的和小于0时，r指针右移，且去重</span></span><br><span class="line">         <span class="keyword">else</span> <span class="keyword">if</span> (num &lt; <span class="number">0</span>){</span><br><span class="line">             <span class="keyword">while</span> (l &lt; r &amp;&amp; nums[l] == nums[++l]);</span><br><span class="line">         }</span><br><span class="line">         <span class="comment">// 当三个数的等于0时，存放结果，左右去重</span></span><br><span class="line">         <span class="keyword">else</span> {</span><br><span class="line">             List&lt;Integer&gt; temp = <span class="keyword">new</span> ArrayList&lt;&gt;(<span class="number">3</span>);</span><br><span class="line">             temp.add(nums[l]);</span><br><span class="line">             temp.add(nums[i]);</span><br><span class="line">             temp.add(nums[r]);</span><br><span class="line">             list.add(temp);</span><br><span class="line">             <span class="comment">// 右去重</span></span><br><span class="line">             <span class="keyword">while</span> (l &lt; r &amp;&amp; nums[r] == nums[--r]);</span><br><span class="line">             <span class="comment">// 左去重</span></span><br><span class="line">             <span class="keyword">while</span> (l &lt; r &amp;&amp; nums[l] == nums[++l]);</span><br><span class="line">         }</span><br><span class="line">     }</span><br><span class="line"></span><br><span class="line"> }</span><br><span class="line"> <span class="keyword">return</span> list;</span><br></pre></td></tr></tbody></table></figure>

]]></content>
      <categories>
        <category>算法</category>
      </categories>
      <tags>
        <tag>求和</tag>
        <tag>排序</tag>
      </tags>
  </entry>
  <entry>
    <title>SpringBoot定时任务</title>
    <url>/2020/11/14/springboot-ding-shi-ren-wu/</url>
    <content><![CDATA[<h1 id="SpringBoot定时任务"><a href="#SpringBoot定时任务" class="headerlink" title="SpringBoot定时任务"></a>SpringBoot定时任务</h1><p>SpringBoot创建定时任务的方式：</p>
<ul>
<li>基于注解（@Scheduled）</li>
<li>基于接口（SchedulingConfigurer）</li>
<li>基于注解设定多线程定时任务</li>
</ul>
<h1 id="静态：基于注解"><a href="#静态：基于注解" class="headerlink" title="静态：基于注解"></a>静态：基于注解</h1><p>在SpringBoot中，使用@Scheduled创建定时任务，代码如下：</p>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StaticScheduledTask</span> </span>{</span><br><span class="line">    <span class="meta">@Scheduled(cron = "0/5 * * * * ?")</span></span><br><span class="line">    <span class="comment">//@Scheduled(fixedRate = 5000)</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">configureTasks</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"执行定时任务，当前时间为："</span>+ LocalDateTime.now());</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li><p>@Configuration: 配置类</p>
</li>
<li><p>@EnableScheduling：开启定时任务</p>
</li>
<li><p>@Scheduled的cron表达式解释：一个cron表达式有至少6个（也可能7个）有空格分隔的时间元素，顺序依次为：秒，分，小时，天，月，星期，年份</p>
</li>
</ul>
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>/</td>
<td>3/5 * * * * * ?：表示从第五秒开始，每五秒执行一次</td>
</tr>
<tr>
<td>，</td>
<td>0 0 9,6 * * ? ：早九晚六</td>
</tr>
<tr>
<td>?</td>
<td>仅作用于天和星期上，表示不指定值</td>
</tr>
<tr>
<td>L</td>
<td>当只有L这个符号，表示最后，0 0 L * * ?，表示24小时中的23:00:00，0 0 3L * * ?表示20:00:00</td>
</tr>
<tr>
<td>*</td>
<td>* 有每个的意思，0 0 0 0 * ？：表示 表示每个月的第一天00:00:00</td>
</tr>
<tr>
<td>#</td>
<td>是用来指定“的”每月第n个工作日,例 在每周（day-of-week）这个字段中内容为”6#3” or “FRI#3” 则表示“每月第三个星期五”；</td>
</tr>
<tr>
<td>W</td>
<td>表示为最近工作日，如“15W”放在每月（day-of-month）字段上表示为“到本月15日最近的工作日”；</td>
</tr>
</tbody></table>
<ul>
<li>每个字段的允许值以及允许符号</li>
</ul>
<table>
<thead>
<tr>
<th>字段</th>
<th>允许值</th>
<th>符号</th>
</tr>
</thead>
<tbody><tr>
<td>秒</td>
<td>0-59</td>
<td>，- */</td>
</tr>
<tr>
<td>分</td>
<td>0-59</td>
<td>，-*/</td>
</tr>
<tr>
<td>时</td>
<td>0-23</td>
<td>，-*/</td>
</tr>
<tr>
<td>日</td>
<td>1-31</td>
<td>，-*？/LWC</td>
</tr>
<tr>
<td>月份</td>
<td>1-12或者JAN-DEC</td>
<td>，-*/</td>
</tr>
<tr>
<td>星期</td>
<td>1-7或者SUM-SAT</td>
<td>，-*？/LC#</td>
</tr>
<tr>
<td>年（可选）</td>
<td>留空，1970-2099</td>
<td>，-*/</td>
</tr>
</tbody></table>
<h1 id="动态：基于接口"><a href="#动态：基于接口" class="headerlink" title="动态：基于接口"></a>动态：基于接口</h1><p>使用SchedulingConfigurer</p>
<ul>
<li>添加已来到pom.xml中</li>
</ul>
<figure class="highlight xml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.zaxxer<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>HikariCP<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 排除 tomcat-jdbc 以使用 HikariCP --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.tomcat<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>tomcat-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spting-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>创建数据库：</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line">CREATE TABLE `cron` (</span><br><span class="line">  `cron_id` varchar(<span class="number">30</span>) COLLATE utf8_bin NOT NULL,</span><br><span class="line">  `cron` varchar(<span class="number">30</span>) COLLATE utf8_bin NOT NULL,</span><br><span class="line">  <span class="function">PRIMARY <span class="title">KEY</span> <span class="params">(`cron_id`)</span></span></span><br><span class="line"><span class="function">) ENGINE</span>=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_bin;</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>配置文件</li>
</ul>
<figure class="highlight yml"><table><tbody><tr><td class="code"><pre><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.zaxxer.hikari.HikariDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/scheduled?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="number">13112110947</span></span><br><span class="line">    <span class="attr">hikari:</span></span><br><span class="line">      <span class="attr">minimum-idle:</span> <span class="number">5</span></span><br><span class="line">      <span class="attr">idle-timeout:</span> <span class="number">600000</span></span><br><span class="line">      <span class="attr">maximum-pool-size:</span> <span class="number">10</span></span><br><span class="line">      <span class="attr">auto-commit:</span> <span class="literal">true</span></span><br><span class="line">      <span class="attr">pool-name:</span> <span class="string">MyHikariCP</span></span><br><span class="line">      <span class="attr">max-lifetime:</span> <span class="number">1800000</span></span><br><span class="line">      <span class="attr">connection-timeout:</span> <span class="number">30000</span></span><br><span class="line">      <span class="attr">connection-test-query:</span> <span class="string">SELECT</span> <span class="number">1</span></span><br><span class="line">  <span class="attr">mybatis:</span></span><br><span class="line">    <span class="attr">type-aliases-package:</span> <span class="string">com.kxq.scheduleddemo.domain</span></span><br><span class="line">    <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>domain：</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Cron</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>{</span><br><span class="line">    <span class="keyword">private</span> String cronId;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String cron;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">@Mapper</span><br><span class="line">public interface CronMapper {</span><br><span class="line">    /**</span><br><span class="line">     * 获取cron表达式</span><br><span class="line">     * @return</span><br><span class="line">     */</span><br><span class="line">    @Select("select cron from cron limit 1")</span><br><span class="line">    String getCron();</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>核心代码</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DynamicScheduleTask</span> <span class="keyword">implements</span> <span class="title">SchedulingConfigurer</span> </span>{</span><br><span class="line">    <span class="meta">@Resource</span></span><br><span class="line">    <span class="keyword">private</span> CronMapper cronMapper;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">configureTasks</span><span class="params">(ScheduledTaskRegistrar scheduledTaskRegistrar)</span> </span>{</span><br><span class="line">        scheduledTaskRegistrar.addTriggerTask(</span><br><span class="line">                <span class="comment">// 添加执行任务</span></span><br><span class="line">                ()-&gt; System.out.println(<span class="string">"执行任务的时间为："</span>+ LocalDateTime.now()),</span><br><span class="line">                <span class="comment">// 设置执行周期</span></span><br><span class="line">                triggerContext -&gt; {</span><br><span class="line">                    <span class="comment">//2.1 从数据库获取执行周期</span></span><br><span class="line">                    String cron = cronMapper.getCron();</span><br><span class="line">                    <span class="comment">//2.2 合法性校验.</span></span><br><span class="line">                    <span class="keyword">if</span> (StringUtils.isEmpty(cron)) {</span><br><span class="line">                        <span class="comment">// Omitted Code ..</span></span><br><span class="line">                    }</span><br><span class="line">                    <span class="comment">//2.3 返回执行周期(Date)</span></span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> CronTrigger(cron).nextExecutionTime(triggerContext);</span><br><span class="line">                }</span><br><span class="line">        );</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<ul>
<li>执行结果</li>
</ul>
<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201114165212982.png" alt="image-20201114165212982"></p>
<h1 id="多线程定时任务"><a href="#多线程定时任务" class="headerlink" title="多线程定时任务"></a>多线程定时任务</h1><ul>
<li>代码</li>
</ul>
<figure class="highlight java"><table><tbody><tr><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableScheduling</span></span><br><span class="line"><span class="meta">@EnableAsync</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MultiThreadScheduledTask</span> </span>{</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="meta">@Scheduled(fixedDelay = 1000)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">task1</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"第一个任务的执行时间："</span>+ LocalDateTime.now());</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Async</span></span><br><span class="line">    <span class="meta">@Scheduled(fixedDelay = 2000)</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">task2</span><span class="params">()</span></span>{</span><br><span class="line">        System.out.println(<span class="string">"第二个任务的执行时间："</span>+LocalDateTime.now());</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>



<ul>
<li>结果</li>
</ul>
<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201114170102499.png" alt="image-20201114170102499"></p>
<p>任务一的执行间隔为1s，任务二的执行间隔为2s</p>
]]></content>
      <categories>
        <category>SpringBoot</category>
      </categories>
      <tags>
        <tag>定时任务</tag>
      </tags>
  </entry>
  <entry>
    <title>Fusion安装centos</title>
    <url>/2020/11/24/fusion-an-zhuang-centos/</url>
    <content><![CDATA[<h1 id="CentOS镜像"><a href="#CentOS镜像" class="headerlink" title="CentOS镜像"></a>CentOS镜像</h1><p><a href="https://mirrors.huaweicloud.com/centos/7.9.2009/isos/x86_64/CentOS-7-x86_64-Minimal-2009.iso">CentOS7</a></p>
<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="将下载好的镜像拖放到图中的位置"><a href="#将下载好的镜像拖放到图中的位置" class="headerlink" title="将下载好的镜像拖放到图中的位置"></a>将下载好的镜像拖放到图中的位置</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124201941346.png" alt="image-20201124201941346"></p>
<h2 id="点击继续"><a href="#点击继续" class="headerlink" title="点击继续"></a>点击继续</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202043894.png" alt="image-20201124202043894"></p>
<h2 id="点击传统bios，继续"><a href="#点击传统bios，继续" class="headerlink" title="点击传统bios，继续"></a>点击传统bios，继续</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202105777.png" alt="image-20201124202105777"></p>
<h2 id="自己重命名，存储"><a href="#自己重命名，存储" class="headerlink" title="自己重命名，存储"></a>自己重命名，存储</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202134475.png" alt="image-20201124202134475"></p>
<h2 id="点击三角符号"><a href="#点击三角符号" class="headerlink" title="点击三角符号"></a>点击三角符号</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202151862.png" alt="image-20201124202151862"></p>
<h2 id="鼠标点进，将光标移到install-CentOS7"><a href="#鼠标点进，将光标移到install-CentOS7" class="headerlink" title="鼠标点进，将光标移到install CentOS7"></a>鼠标点进，将光标移到install CentOS7</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202203915.png" alt="image-20201124202203915"></p>
<h2 id="等待"><a href="#等待" class="headerlink" title="等待"></a>等待</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202216630.png" alt="image-20201124202216630"></p>
<h2 id="选择语言，继续"><a href="#选择语言，继续" class="headerlink" title="选择语言，继续"></a>选择语言，继续</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202250016.png" alt="image-20201124202250016"></p>
<h2 id="选择安装位置"><a href="#选择安装位置" class="headerlink" title="选择安装位置"></a>选择安装位置</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202321010.png" alt="image-20201124202321010"></p>
<h2 id="选择分配好的磁盘，完成"><a href="#选择分配好的磁盘，完成" class="headerlink" title="选择分配好的磁盘，完成"></a>选择分配好的磁盘，完成</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202339039.png" alt="image-20201124202339039"></p>
<h2 id="开始安装"><a href="#开始安装" class="headerlink" title="开始安装"></a>开始安装</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202349948.png" alt="image-20201124202349948"></p>
<h2 id="设置Root密码，也可以创建用户，建议只是学习，可以不创建用户，直接使用root"><a href="#设置Root密码，也可以创建用户，建议只是学习，可以不创建用户，直接使用root" class="headerlink" title="设置Root密码，也可以创建用户，建议只是学习，可以不创建用户，直接使用root"></a>设置Root密码，也可以创建用户，建议只是学习，可以不创建用户，直接使用root</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202454418.png" alt="image-20201124202454418"></p>
<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124202429903.png" alt="image-20201124202429903"></p>
<h2 id="重启"><a href="#重启" class="headerlink" title="重启"></a>重启</h2><p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124203240424.png" alt="image-20201124203240424"></p>
<h1 id="设置静态ip"><a href="#设置静态ip" class="headerlink" title="设置静态ip"></a>设置静态ip</h1><h2 id="查看fusion的网关，子网掩码"><a href="#查看fusion的网关，子网掩码" class="headerlink" title="查看fusion的网关，子网掩码"></a>查看fusion的网关，子网掩码</h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">vim  /Library/Preferences/VMware\ Fusion/vmnet8/nat.conf </span><br></pre></td></tr></tbody></table></figure>

<p><img src="https://gitee.com/kexiquan/picture/raw/master/uPic/image-20201124204207363.png" alt="image-20201124204207363"></p>
<h2 id="到虚拟机里修改网络配置文件"><a href="#到虚拟机里修改网络配置文件" class="headerlink" title="到虚拟机里修改网络配置文件"></a>到虚拟机里修改网络配置文件</h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">vi /etc/sysconfig/network-scripts/ifcfg-ens33</span><br></pre></td></tr></tbody></table></figure>

<figure class="highlight plain"><table><tbody><tr><td class="code"><pre><span class="line">TYPE=Ethernet</span><br><span class="line">PROXY_METHOD=none</span><br><span class="line">BROWSER_ONLY=no</span><br><span class="line"># BOOTPROTO=dhcp # 关闭自动分配</span><br><span class="line">DEFROUTE=yes</span><br><span class="line">IPV4_FAILURE_FATAL=no</span><br><span class="line">IPV6INIT=yes</span><br><span class="line">IPV6_AUTOCONF=yes</span><br><span class="line">IPV6_DEFROUTE=yes</span><br><span class="line">IPV6_FAILURE_FATAL=no</span><br><span class="line"># IPV6_ADDR_GEN_MODE=stable-privacy</span><br><span class="line">NAME=ens33</span><br><span class="line">UUID=360a8364-ce02-4141-88cd-6b77539e9bde</span><br><span class="line">DEVICE=ens33</span><br><span class="line"># ONBOOT=no</span><br><span class="line"># 添加的内容</span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line">IPADDR=172.16.233.129</span><br><span class="line">GATEWAY=172.16.233.1</span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line">DNS1=192.168.0.1</span><br><span class="line">DNS2=114.114.114.114</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<h2 id="退出，重启网络服务"><a href="#退出，重启网络服务" class="headerlink" title="退出，重启网络服务"></a>退出，重启网络服务</h2><figure class="highlight shell"><table><tbody><tr><td class="code"><pre><span class="line">systemctl restart network</span><br></pre></td></tr></tbody></table></figure>

]]></content>
      <categories>
        <category>Linux</category>
      </categories>
      <tags>
        <tag>安装系统</tag>
        <tag>CentOS</tag>
      </tags>
  </entry>
</search>
